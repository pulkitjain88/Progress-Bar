!function(){function a(a,b){a>100&&(a=100);var c=b*a/100;document.getElementById("progressBars").insertAdjacentHTML("beforeend",'<div class="progress-bar"><div class="filled-bar" data-value="'+c+'" style="width: '+a+'%"></div><span class="amount">'+a+"%</span></div>")}function b(a){var b=document.createElement("option");b.text="Progress "+a,b.value=a,document.getElementById("dropdown").appendChild(b)}function c(a,b){var c=document.getElementById("controls"),d=document.createElement("input");d.setAttribute("type","button"),d.setAttribute("name","button"+b),d.setAttribute("value",a),d.setAttribute("class","button"),c.appendChild(d)}var d="",e="0",f="",g="",h=new XMLHttpRequest;h.open("GET","json/endpoint.json",!0),h.onreadystatechange=function(){if(4==h.readyState&&200==h.status){d=JSON.parse(h.responseText),e=d.limit,f=d.buttons,g=d.bars;for(var i=f.length,j=0;j<i;j++)c(f[j],j+1);for(var k=g.length,l=0;l<k;l++)b(l+1),a(g[l],e);for(var m=document.getElementsByClassName("button"),n=document.getElementsByClassName("filled-bar"),o=0;o<m.length;o++)m[o].addEventListener("click",function(){var a=document.getElementById("dropdown"),b=a.options[a.selectedIndex].value,c=document.getElementsByClassName("progress-bar")[b-1],d=parseFloat(this.value),f=parseFloat(c.childNodes[0].getAttribute("data-value"))+d;f=f<0?0:f,f=f>e?e:f,c.childNodes[0].setAttribute("data-value",f),c.childNodes[0].style.width=100*f/e+"%",c.childNodes[1].innerHTML=parseInt(100*f/e)+"%",n[b-1].style.backgroundColor=f==e?"red":"orange"},!1)}},h.send()}();